<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<base href="https://scottpetrovic.github.io/krita-hugo/">

	<title>Krita   | Krita 4.2.0: the First Painting Application to bring HDR Support to Windows </title>

	<link href="css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />

	<link href="images/favicon.ico" rel="shortcut icon" type=image/vnd.microsoft.icon>

	<link rel="alternate" type="application/rss+xml" href="/index.xml" title="Site Title">

	<script src="js/popper.min.js" crossorigin="anonymous"></script>  	
	<script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>  
		
	
</head>

<body>

<header class="site-header"><nav class="site-nav max-content-width">
   <a class="logo" href="https://scottpetrovic.github.io/krita-hugo//en">
      <img src="images/krita-logo.png" style="width: 7.5rem" />
    </a>

    <ul class="main-menu">
      <li class="">
          <a href="https://scottpetrovic.github.io/krita-hugo/features">Features</a>
      </li><li class="">
          <a href="https://scottpetrovic.github.io/krita-hugo/download">Download</a>
      </li><li class="">
          <a href="https://docs.krita.org">Learn</a>
      </li><li class="">
          <a href="https://scottpetrovic.github.io/krita-hugo/get-involved">Get Involved</a>
      </li><li class="">
          <a href="https://scottpetrovic.github.io/krita-hugo/shop">Shop</a>
      </li>

      <li class="donate-button">
        <a href="https://fund.krita.org" class="button">Donate</a>
      </li>

     

  </ul>
  </nav>
</header>


<main class="content">


<div class="post">
    <h1 style="margin-bottom: 0.5rem">Krita 4.2.0: the First Painting Application to bring HDR Support to Windows</h1>

    <div style="text-align: center; margin-bottom: 2rem;">
        <span>March 14, 2019</span> 
        <span class="vertical-divider">|</span>
        <span> Reading time: <em>6 min</em></span> 
        
        
    </div>

    <p>We&rsquo;re deep in bug fixing mode now, because in May we want to release the next major version of Krita: Krita 4.2.0. While there will be a host of new features, a plethora of bug fixes and performance improvements, one thing is unique: support for painting in HDR mode. Krita is the very first application, open source or proprietary, that offers this!</p>
<p>So, today we release a preview version of Krita 4.2.0 with HDR support baked in, so you can give the new functionality a try!</p>
<p>Of course, at this moment, only <a href="https://support.microsoft.com/en-us/help/4040263/windows-10-hdr-advanced-color-settings">Windows 10 supports HDR</a> monitors, and only with some very specific hardware. Your CPU and GPU need to be new enough, and you need to have a <a href="https://displayhdr.org/certified-products/">monitor that supports HDR</a>. We know that the brave folks at Intel are working on HDR support for Linux, though!</p>
<h3 id="what-is-hdr">What is HDR?</h3>
<p>HDR stands for High Dynamic Range. The opposite is, of course, Low Dynamic Range.</p>
<p>Now, many people when hearing the word &ldquo;HDR&rdquo; will think of the HDR mode of their phone&rsquo;s cameras. Those cameras map together images taken at different exposure levels in one image to create, within the small dynamic range of a normal image, the illusion of a high dynamic range image, with often quite unnatural results.</p>
<p>This is not that! Tone-mapping is old-hat. These days, manufacturers are bringing out new monitors that can go much brighter than traditional monitors, up to a 1000 nits (a standard for brightness), or even brighter for professional monitors. And modern systems, Intel 7th generation Core CPU&rsquo;s, support these monitors.</p>
<p>And it&rsquo;s not just brightness, these days most normal monitors are manufactured to display the <a href="https://en.wikipedia.org/wiki/SRGB">sRGB</a> gamut. This is fairly limited, and lacks quite a bit of greens (some profession monitors have a wider gamut, of course). HDR monitors use a far wider gamut, with the <a href="https://en.wikipedia.org/wiki/Rec._2020">Rec. 2020</a> colorspace. And instead of using traditional exponential gamma correction, they use <a href="https://en.wikipedia.org/wiki/High-dynamic-range_video#Perceptual_Quantizer">Perceptual Quantizer (PQ)</a>, which not just extends the dynamic range to sun-bright values, but also allows to encode very dark areas, not available in usual sRGB.</p>
<p><a href="images/posts/2019/image3.png"><img src="images/posts/2019/image3.png" alt=""></a></p>
<p>And finally, many laptop panels only support 6 bits per channel; most monitors only 8 bits, monitors for graphics professionals 10 bits per channel &ndash; but HDR monitors support from 10 to 16 bits per channel. This means much nicer gradations.</p>
<p>It&rsquo;s early days, though, and from a developers&rsquo; point of view, the current situation is messy. It&rsquo;s hard to understand how everything fits together, and we&rsquo;ll surely have to update Krita in the future when things straighten out, or if we discover we&rsquo;ve misunderstood something.</p>
<p>So&hellip; The only platform that supports HDR is Windows 10 via DirectX. Linux, nope, OpenGL, nah, macOS, not likely. Since Krita speaks OpenGL, not DirectX, we had to hack the OpenGL to DirectX compatibility layer, Angle, to support the extensions needed to work in HDR. Then we had to hack Qt to make it possible to convert the UI (things like buttons and panels) from sRGB to p2020-pq, while keeping the main canvas unconverted. We had to add, of course, a HDR capable color selector. All in all, quite a few months of hard work.</p>
<p>That&rsquo;s just the technical bit: the important bit is how people actually can create new HDR images.</p>
<h3 id="so-why-is-this-cool">So, why is this cool?</h3>
<p>You&rsquo;ve got a wider range of colors to work with. You&rsquo;ve got a wider range of dark to light to work with: you can actually paint with pure light, if you want to. What you&rsquo;re doing when creating an HDR image is, in a way, not painting something as it should be shown on a display, but as the light falls on a scene. There&rsquo;s so much new flexibility here that we&rsquo;ll be discovering new ways to make use of it for quite some time!</p>
<p>If you&rsquo;d have a HDR compatible set-up, and a browser that would support HDR, well, this video could be in HDR:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/4O1kxEL9naw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>(Image by Wolthera van Hövell tot Westerflier)</p>
<h3 id="and-how-do-i-use-it">And how do I use it?</h3>
<p>Assuming you have a HDR capable monitor, a DisplayPort 1.4 or HDMI 2.0<strong>a</strong> (the &lsquo;a&rsquo; is important!) or higher cable, the latest version of Windows 10 with WDDM 2.4 drivers and a CPU and GPU that supports hits, this is how it works:</p>
<p>You have to <a href="https://support.microsoft.com/en-us/help/4040263/windows-10-hdr-advanced-color-settings">switch the display to HDR mode manually, in the Windows settings utility</a>. Now Windows will start talking to the display in p2020-pq mode. To make sure that you don&rsquo;t freak out because everything looks weird, you&rsquo;ll have to select a default SDR brightness level.</p>
<p><a href="images/posts/2019/hdr_settings.png"><img src="images/posts/2019/hdr_settings.png" alt=""></a></p>
<p>You have to configure Krita to support HDR. In the <em>Settings → Configure Krita → Display</em> settings panel you need to select your preferred surface. You&rsquo;ll also want to select the HDR-capable <strong>small color selector</strong> from the <em>Settings → Dockers</em> menu.</p>
<p><a href="images/posts/2019/hdr_krita_settings.png"><img src="images/posts/2019/hdr_krita_settings.png" alt=""></a></p>
<p>To create a proper HDR image, you will need to make a canvas using a profile with the rec 2020 gamut and a linear tone-response-curve: &ldquo;Rec2020-elle-V4-g10.icc&rdquo; is the profile you need to choose. HDR images are standardized to use the Rec2020 gamut, and the PQ trc. However, a linear TRC is easier to edit images in, so we don&rsquo;t convert to PQ until we&rsquo;re satisfied with our image.</p>
<p>Krita&rsquo;s native .kra file format can save HDR images just fine. You should use that as your working format. For sharing with other image editors, you should use the OpenEXR format. For sharing on the Web, you can use the expanded PNG format. Since all this is so new, there&rsquo;s not much support for that standard yet.</p>
<p>You can also make HDR animations&hellip; Which is pretty cool! And you can export your animations to mp4 and H.265. You need a version of <a href="https://trac.ffmpeg.org/wiki/Encode/H.265">FFMpeg</a> that supports H.265. And after telling Krita where to find that, it&rsquo;s simply a matter of:</p>
<ul>
<li>Have an animation open.</li>
<li>Select File → Render Animation</li>
<li>Select Video</li>
<li>Select Render as MPEG-4 video or Matroska</li>
<li>Press the configure button next to the fileformat dropdown.</li>
<li>Select at the top &lsquo;H.265, MPEG-H Part 2 (HEVC)&rsquo;</li>
<li>Select for the Profile: &lsquo;main10&rsquo;.</li>
<li>The HDR Mode checkbox should now be enabled: toggle it.</li>
<li>Click &lsquo;HDR Metadata&rsquo; to configure the HDR metadata</li>
<li>Finally, when done, click &lsquo;render&rsquo;.</li>
</ul>
<p>If you have a CPU of 7th gen Core or later with intel Graphics integrated you can take advantage of HW accelerated encode to save time in the export stage: ffmpeg does that for you.</p>
<h3 id="download">Download</h3>
<p>Sorry, this version of Krita is <em>only</em> useful for Windows users. Linux graphics developers, get a move on!</p>
<h3 id="windows">Windows</h3>
<ul>
<li>64 bits Windows: <a href="https://download.kde.org/unstable/krita/4.2.0-HDR/krita-x64-4.2.0-HDR-setup.exe">krita-x64-4.2.0-HDR-setup.exe</a></li>
<li>Portable 64 bits Windows: <a href="https://download.kde.org/unstable/krita/4.2.0-HDR/krita-x64-4.2.0-HDR.zip">krita-4.2.0-HDR.zip</a></li>
</ul>

</div>


</main>






<footer>

<div  class="container-padding">

	<div class="row">
		<div class="col-md-3 footer-section">
			<h4>Software</h4>
			<a href="https://scottpetrovic.github.io/krita-hugo/report-a-bug">Report a bug</a>	
			<a href="https://scottpetrovic.github.io/krita-hugo/roadmap">Roadmap</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/release-history">Release History</a>	

		</div>
		<div class="col-md-3 footer-section">
			<h4>Education</h4>
			<a href="https://docs.krita.org/en/"></a>
			<a href="https://docs.krita.org/KritaFAQ.html">FAQ</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/privacy-statement">Privacy Statement</a>	
			<a href="https://docs.krita.org/en/tutorials.html">Tutorials</a>

		</div>
		<div class="col-md-4 footer-section">
			<h4>Foundation</h4>
			<a href="https://scottpetrovic.github.io/krita-hugo/about">About</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/donations">Donate</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/get-involved">Get Involved</a>
			
			<a href="https://userbase.kde.org/What_is_KDE/en">What is KDE</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/website">Website license</a>
			<a href="https://scottpetrovic.github.io/krita-hugo/contact">Contact</a>


		</div>

		<div class="col-md-2">
			<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLangauge" data-bs-toggle="dropdown" aria-expanded="false">
				Language
			</button>
			<ul class="dropdown-menu" aria-labelledby="dropdownMenuLangauge">
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/">English</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/fr/">French</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/zh/">Chinese</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/zh-hk/">Chinese (HK)</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/zh-tw/">Chinese (TW)</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/jp/">Japanese</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/es/">Spanish</a>
				</li>
				
				<li>
					<a class="dropdown-item" href="https://scottpetrovic.github.io/krita-hugo/ko/">Korean</a>
				</li>
				
			</ul>
			
		</div>
	</div>

</div>

</footer>




<script type="text/javascript">
	var _paq = _paq || [];
	_paq.push(['setCookieDomain', '*.krita.org']);
	_paq.push(['setDomains', '*.krita.org']); 
	_paq.push(['setDocumentTitle', document.domain + "/" + document.title]);
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u="//stats.kde.org/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', 13]);
		var d=document, g=d.createElement('script'),
	s=d.getElementsByTagName('script')[0];
		g.type='text/javascript'; g.async=true; g.defer=true;
	g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>

<noscript>
	<p>
		<img src="//stats.kde.org/piwik.php?idsite=13" style="border:0;" alt="" />
	</p>
</noscript>



</body>
</html>

